create table app_users (active boolean default true, enterprise_id bigint, id bigint generated by default as identity, email varchar(255) not null unique, name varchar(255), password varchar(255), phone varchar(255), role varchar(255) check (role in ('SUPER_ADMIN','ADMIN','EMPLEADO','CLIENTE')), primary key (id));
create table appointments (paid boolean, price float(53) not null, customer_id bigint not null, date timestamp(6), employee_id bigint not null, enterprise_id bigint not null, id bigint generated by default as identity, paid_at timestamp(6), service_id bigint not null, payment_method varchar(255) check (payment_method in ('CASH','CARD')), status varchar(255) check (status in ('PENDING','CONFIRMED','COMPLETED','CANCELED','NO_SHOW')), primary key (id));
create table customers (visits_count integer, enterprise_id bigint not null, id bigint generated by default as identity, user_id bigint, email varchar(255), internal_notes TEXT, name varchar(255), phone varchar(255), primary key (id));
create table enterprises (id bigint generated by default as identity, address varchar(255), banner varchar(255), cif varchar(255), description varchar(255), email varchar(255), facebook varchar(255), instagram varchar(255), logo varchar(255), name varchar(255) unique, phone varchar(255), primary_color varchar(255), secondary_color varchar(255), slug varchar(255) unique, tiktok varchar(255), website varchar(255), whatsapp varchar(255), primary key (id));
create table service_offerings (deleted boolean not null, duration integer, price float(53) not null, enterprise_id bigint not null, id bigint generated by default as identity, category varchar(255), description varchar(255), image varchar(255), name varchar(255), primary key (id));
create table working_hours (is_day_off boolean, enterprise_id bigint not null, id bigint generated by default as identity, user_id bigint, "day" varchar(255), description varchar(255), end_time varchar(255), start_time varchar(255), primary key (id));
alter table if exists app_users add constraint FKg2fgaioblls00w6nd799qebq2 foreign key (enterprise_id) references enterprises;
alter table if exists appointments add constraint FKrlbb09f329sfsmftrh7y0yxtk foreign key (customer_id) references customers;
alter table if exists appointments add constraint FK4kw793g5oqod0xhiddvnxsbho foreign key (employee_id) references app_users;
alter table if exists appointments add constraint FK4xkxkqnni0mdgnyb140x06v24 foreign key (enterprise_id) references enterprises;
alter table if exists appointments add constraint FK32dyc3di4gu56nku6ng6go7qn foreign key (service_id) references service_offerings;
alter table if exists customers add constraint FKjf31u199ifqk7jyqoglgkfr6e foreign key (enterprise_id) references enterprises;
alter table if exists customers add constraint FKm470sawh3ptbotdks0u5msdk6 foreign key (user_id) references app_users;
alter table if exists service_offerings add constraint FK4ehd6yma1i0kpcmhq5s8eg93d foreign key (enterprise_id) references enterprises;
alter table if exists working_hours add constraint FKlxumrpq261ye3qes69hya57en foreign key (enterprise_id) references enterprises;
alter table if exists working_hours add constraint FKki3a24t1507ljg3xj72cclgn3 foreign key (user_id) references app_users;
